# Sutom 游戏项目需求文档

## 项目概述
Sutom 是一个基于 Web 的猜词游戏，类似于 Wordle。玩家需要通过多次猜测来找到正确的单词，系统会根据猜测结果提供视觉和音频反馈。

## 核心功能需求

### 1. 游戏基础功能
- **单词管理**：
  - 支持通过 URL 参数传入待猜单词（base64 编码）
  - 默认单词：cacophonie
  - 单词长度可变（当前支持任意长度）
  - 第一个字母默认显示（提示功能）

- **游戏界面**：
  - 游戏网格：动态生成基于单词长度的网格
  - 虚拟键盘：支持法语键盘布局（AZERTY）
  - 响应式设计：适配不同屏幕尺寸

### 2. 交互功能
- **输入系统**：
  - 支持物理键盘输入（A-Z 字母、回车、退格）
  - 支持虚拟键盘点击输入
  - 输入验证：只接受字母字符

- **游戏逻辑**：
  - 字母匹配检查：
    - 绿色（found）：字母正确且位置正确
    - 黄色（wrong）：字母正确但位置错误
    - 灰色（not-found）：字母不存在于单词中
  - 键盘状态同步：键盘按键根据使用情况显示对应颜色
  - 重复字母处理：正确处理单词中的重复字母

### 3. 反馈系统
- **视觉反馈**：
  - 网格颜色变化动画
  - 键盘按键状态更新
  - 逐字母检查动画（270ms 延迟）

- **音频反馈**：
  - found.wav：字母位置正确
  - wrong.wav：字母存在但位置错误
  - not-found.wav：字母不存在
  - win.mp3：游戏胜利

### 4. 游戏状态管理
- **游戏进行状态**：
  - 当前行追踪
  - 字母计数管理
  - 猜测历史记录

- **游戏结束处理**：
  - 胜利检测
  - 键盘禁用
  - 音效播放

## 技术需求

### 1. 技术栈
- **前端框架**：Next.js 13+ (App Router)
- **开发栈**：T3 Stack
  - TypeScript
  - TailwindCSS
  - tRPC
  - Prisma (可选，用于数据持久化)
  - NextAuth.js (可选，用于用户认证)

### 2. 性能要求
- **响应性**：
  - 输入延迟 < 100ms
  - 动画流畅度 60fps
  - 音频播放延迟 < 50ms

- **兼容性**：
  - 现代浏览器支持（Chrome 90+, Firefox 88+, Safari 14+）
  - 移动设备适配
  - 触摸交互支持

### 3. 代码质量
- **TypeScript**：完整类型定义
- **代码规范**：ESLint + Prettier
- **组件化**：可复用的 React 组件
- **状态管理**：使用 React hooks 和 Context API

## 用户界面设计需求

### 1. 颜色方案
- 主要颜色：
  - 背景色：#2b2b2b
  - 普通格子：#0077c7
  - 找到字母：#e7002a
  - 位置错误：#ffbd00
  - 未找到：#707070

### 2. 布局设计
- **桌面端**：
  - 游戏网格居中显示
  - 虚拟键盘位于底部
  - 响应式网格大小（6vw）

- **移动端**：
  - 优化触摸交互
  - 适配小屏幕布局
  - 虚拟键盘易于点击

### 3. 动画效果
- 字母输入动画
- 颜色变化过渡
- 键盘按键反馈

## 扩展功能（可选）

### 1. 游戏增强
- 难度级别选择
- 每日挑战模式
- 成就系统
- 统计数据跟踪

### 2. 社交功能
- 分享游戏结果
- 多人对战模式
- 排行榜系统

### 3. 本地化
- 多语言支持
- 不同语言的词库
- 键盘布局适配

## 部署要求
- **平台**：Vercel 或 Netlify
- **域名**：自定义域名（可选）
- **CDN**：静态资源加速
- **监控**：错误追踪和性能监控

## 测试要求
- **单元测试**：Jest + React Testing Library
- **端到端测试**：Playwright
- **测试覆盖率**：> 80%
- **性能测试**：Lighthouse 评分 > 90

## 项目结构
```
src/
├── components/          # React 组件
│   ├── Game/           # 游戏相关组件
│   ├── Keyboard/       # 虚拟键盘组件
│   └── UI/             # 通用 UI 组件
├── hooks/              # 自定义 hooks
├── lib/                # 工具函数
├── types/              # TypeScript 类型定义
├── styles/             # 样式文件
└── app/                # Next.js App Router 页面
```

## 开发时间线
- **阶段 1**：基础游戏功能（2-3 天）
- **阶段 2**：音效和动画（1-2 天）
- **阶段 3**：响应式设计和优化（1-2 天）
- **阶段 4**：测试和部署（1 天）

总预计开发时间：5-8 天 